<header class="mb-5">
  <nav class="navbar navbar-expand-lg border-bottom bavbar-dark boder-secondary bg-warning">
    <div class="container">
      <!--会員ログイン時-->
      <% if user_signed_in? %>
        <a class="navbar-brand" href="/"><span><%= image_tag "logo.png" %></span></a>
        <% if current_user.guest_user? %>
          <p>ゲストユーザーとしてログイン中</p>
        <% end %>
      <% elsif admin_signed_in? %>
        <a class="navbar-brand" href="/admin"><span><%= image_tag "logo.png" %></span></a>
        <p>管理者としてログイン中</p>

      <% else %>
        <a class="navbar-brand" href="/"><span><%= image_tag "logo.png" %></span></a>
      <% end %>

      <button class="navbar-toggler navbar-dark" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ml-auto">
          <% if user_signed_in? %>
            <li>
              <%= link_to about_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-circle-info">使い方</i>
              <% end %>
            </li>
            <li>
              <%= link_to  awards_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-medal">アワード一覧</i>
              <% end %>
            </li>
            <li>
              <%= link_to grand_prizes_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-trophy">大賞一覧</i>
              <% end %>
            </li>
            <li>
              <%= link_to my_page_path, class: 'nav-link text-dark' do %>
                <i class="fa-solid fa-user">マイページ</i>
              <% end %>
            </li>

            <li class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                お知らせ
                <span class="badge badge-danger"><%= current_user.notifications.where(read: false).count %></span>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <% if current_user.notifications.where(read: false).any? %>
                  <small class="dropdown-item disabled">直近5件の未読の通知を表示しています</small>
                  <% current_user.notifications.where(read: false).limit(5).order(created_at: :desc).each do |notification| %>
                    <%= link_to notification_message(notification), notification_path(notification), method: :patch, class: "dropdown-item" %>
                  <% end %>
                <% else %>
                  <span class="dropdown-item disabled">未読の通知はありません</span>
                <% end %>
              </div>
            </li>

            <li>
              <%= link_to destroy_user_session_path, method: :delete, class: 'nav-link text-dark' do %>
                <i class="fa-solid fa-right-from-bracket">ログアウト</i>
              <% end %>
            </li>

          <!--管理者ログイン時-->
          <% elsif admin_signed_in? %>
            <li>
              <%= link_to admin_awards_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-medal">アワード一覧</i>
              <% end %>
            </li>
            <li>
              <%= link_to admin_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-trophy">大賞一覧</i>
              <% end %>
            </li>
            <li>
              <%= link_to admin_users_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-users">会員一覧</i>
              <% end %>
            </li>


            <li>
              <%= link_to destroy_admin_session_path, method: :delete, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-right-from-bracket">ログアウト</i>
              <% end %>
            </li>

          <!--未ログイン-->
          <% else %>
            <li>
              <%= link_to about_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-circle-info">ABOUT</i>
              <% end %>
            </li>
            <li>
              <%= link_to awards_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-medal">アワード一覧</i>
              <% end %>
            </li>
            <li>
              <%= link_to grand_prizes_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-trophy">大賞一覧</i>
              <% end %>
            </li>

            <li>
              <%= link_to new_user_session_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-right-to-bracket">ログイン</i>
              <% end %>
            </li>
            <li>
              <%= link_to new_user_registration_path, class: 'nav-link text-dark mx-1' do %>
                <i class="fa-solid fa-user-plus">新規登録</i>
              <% end %>
            </li>
          <% end %>
    </div>
  </nav>
</header>

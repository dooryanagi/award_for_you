<% if params[:user_id] %>
	<h2><i class="fa-solid fa-medal"></i><%= @user.name %>さんのアワード一覧</h2>
<% elsif params[:applauses] %>
	<h2><i class="fa-solid fa-medal"></i><%= @user.name %>さんが拍手を贈ったアワード一覧</h2>
<% else %>
	<h2><i class="fa-solid fa-medal"></i>みんなのアワード一覧</h2>
<% end %>

<div class="row d-flex justify-content-center my-5">
	<div class="col-4 colspan-2">
		<%= link_to "アワードを受賞する", new_award_path, class: "btn btn-outline-success btn-block" %>
	</div>
	<div class="col-4 colspan-2 d-flex justify-content-center">
		<%= form_tag(awards_path, method: :get) do %>
			<%= select_tag :sort_by, options_for_select({'新しい順'=>'latest','古い順'=>'old','拍手多い順'=>'applause_count'}, params[:sort_by]) %>
			<%= submit_tag '表示する' %>
		<% end %>
	</div>
</div>

<div class="row row-cols-4 mb-3">
	<% @awards.each do |award| %>
		<div class="col">
			<div class="center-block text-center">
				<%= link_to award_path(award.id) do %>
					<%= image_tag award.get_award_image(150,150), class: "rounded-circle" %>
				<% end %>
			</div>
			<div class="center-block text-center">
				<% if user_signed_in? && award.applaused_by?(current_user) %>
					<%= link_to award_applause_path(award), method: :delete do %>
						<i class="fa-solid fa-hands-clapping" style="color:black;"><%= award.applauses.count %></i>
					<% end %>
				<% else %>
					<%= link_to award_applause_path(award), method: :post do %>
						<i class="fa-solid fa-hands-clapping" style="color:gray;"><%= award.applauses.count %></i>
					<% end %>
				<% end %>
				</div>
		</div>
	<% end %>
</div>

<div class="row d-flex justify-content-center">
	<%= paginate @awards, theme: 'bootstrap-5' %>
</div>